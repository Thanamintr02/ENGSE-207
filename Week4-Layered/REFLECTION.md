# การสะท้อนคิด สัปดาห์ที่ 4: Layered Architecture

## 1. สิ่งที่เรียนรู้
เรียนรู้วิธีการออกแบบระบบโดยแบ่งสถาปัตยกรรมเป็น 3 ชั้น (Controller, Service, Repository) และเข้าใจถึงความสำคัญของมโนทัศน์ "Separation of Concerns"

## 2. ข้อดีที่พบจากการทำจริง
เมื่อต้องการเพิ่ม Logic การตรวจสอบข้อมูล (เช่น ห้ามเปลี่ยน DONE กลับเป็น TODO) สามารถทำได้ใน Service Layer โดยไม่ต้องไปแตะต้องโค้ดที่จัดการเรื่อง Database เลย

## 3. ความท้าทายที่พบ
ความท้าทายคือการส่งต่อข้อมูลระหว่างชั้น (Data Flow) และการจัดการ Error ที่ต้องส่งกลับจาก Repository ผ่าน Service มายัง Controller

## 4. การจัดโครงสร้างโค้ด
ดีขึ้นอย่างมากเมื่อเทียบกับสัปดาห์ที่ 3 เพราะใน Week 3 ไฟล์เดียวจะมีทั้ง SQL และ Route handling ทำให้โค้ดอ่านยากและยาวเกินไป

## 5. เมื่อไหร่ควรใช้ Layered Architecture
เมื่อโปรเจกต์เริ่มมีขนาดใหญ่ มีนักพัฒนามากกว่า 2 คนขึ้นไป หรือระบบมีแนวโน้มที่จะต้องเปลี่ยนเทคโนโลยีฐานข้อมูลในอนาคต

## 6. การวิเคราะห์ Trade-offs
### ข้อดี
- โค้ดสะอาด ทดสอบง่าย (Unit Testing ทำได้ง่ายขึ้น)
### ข้อเสีย
- เขียนโค้ดเยอะขึ้น ต้องสร้างหลายไฟล์เพื่อฟีเจอร์เดียว
### การประเมินโดยรวม
เป็นการลงทุนที่คุ้มค่าสำหรับ Software Engineering ที่มีคุณภาพ
